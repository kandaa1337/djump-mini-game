<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doodle Jump</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            touch-action: none;
            position: relative;
            
        }
        
        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #gameCanvas {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            max-width: 100%;
            max-height: 100%;
            background: linear-gradient(to bottom, #87CEEB, #F0F8FF);
        }
        
        .ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }
        
        .ui-element {
            pointer-events: auto;
        }
        
        /* –ü–∞–Ω–µ–ª—å —Å—á–µ—Ç–∞ */
        .score-panel {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px 20px;
            color: white;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            min-width: 140px;
        }
        
        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .score-item:last-child {
            margin-bottom: 0;
        }
        
        .score-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .score-value {
            font-size: 18px;
            font-weight: 900;
            color: #FFD700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .control-panel {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 12px 16px;
            color: white;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            min-width: 120px;
            text-align: center;
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }
        
        .control-btn:active {
            transform: translateY(0px);
        }
        
        .gyro-toggle.active {
            background: rgba(76, 175, 80, 0.8);
            border-color: #4CAF50;
        }
        
        .restart-btn {
            background: rgba(255, 107, 107, 0.8);
            border-color: #FF6B6B;
        }
        
        .restart-btn:hover {
            background: rgba(255, 82, 82, 0.9);
        }
        
        /* –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .mobile-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 105px;
            z-index: 20;
        }
        
        .direction-btn {
            margin-bottom: 20px;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(255, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 0, 0, 0.3);
            color: white;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            touch-action: manipulation;
        }
        
        .direction-btn:active {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0.95);
        }
        
        .direction-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        /* –≠–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã */
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: none;
            max-width: 90%;
            min-width: 300px;
        }
        
        .game-over h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 32px;
            font-weight: 900;
        }
        
        .final-stats {
            display: flex;
            justify-content: space-around;
            margin: 25px 0;
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 900;
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .play-again-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .play-again-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .score-panel {
                top: 10px;
                left: 10px;
                padding: 12px 16px;
                min-width: 120px;
            }
            
            .score-label {
                font-size: 12px;
            }
            
            .score-value {
                font-size: 16px;
            }
            
            .control-panel {
                top: 10px;
                right: 10px;
                gap: 8px;
            }
            
            .control-btn {
                padding: 10px 12px;
                font-size: 12px;
                min-width: 100px;
            }
            
            .mobile-controls {
                display: flex;
                bottom: 15px;
            }
            
            .direction-btn {
                width: 75px;
                height: 75px;
                font-size: 30px;
            }
            
            .game-over {
                padding: 30px 20px;
                min-width: 280px;
            }
            
            .game-over h2 {
                font-size: 28px;
            }
            
            .stat-value {
                font-size: 24px;
            }
            
            .stat-label {
                font-size: 12px;
            }
        }
        
        @media (max-width: 480px) {
            .final-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .direction-btn {
                width: 55px;
                height: 55px;
                font-size: 18px;
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .score-value {
            animation: pulse 2s infinite ease-in-out;
        }
        
        .gyro-toggle.active {
            animation: pulse 3s infinite ease-in-out;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas" width="400" height="600"></canvas>
        
        <div class="ui-overlay">
            <!-- –ü–∞–Ω–µ–ª—å —Å—á–µ—Ç–∞ -->
            <div class="score-panel ui-element">
                <div class="score-item">
                    <span class="score-label">–û—á–∫–∏:</span>
                    <span class="score-value" id="scoreValue">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">–í—ã—Å–æ—Ç–∞:</span>
                    <span class="score-value" id="heightValue">0–º</span>
                </div>
            </div>
            
            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="control-panel ui-element">
                <button class="control-btn gyro-toggle" id="gyroToggle">
                    üîÑ –ì–∏—Ä–æ—Å–∫–æ–ø: –í–´–ö–õ
                </button>
                <button class="control-btn restart-btn" onclick="restartGame()">
                    üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
                </button>
            </div>
            
            <!-- –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="mobile-controls ui-element" id="mobileControls">
                <button class="direction-btn" id="leftBtn">‚Üê</button>
                <button class="direction-btn" id="rightBtn">‚Üí</button>
            </div>
            
            <!-- –≠–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã -->
            <div class="game-over ui-element" id="gameOverScreen">
                <h2>üéÆ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
                
                <div class="final-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="finalScore">0</span>
                        <span class="stat-label">–û—á–∫–∏</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="finalHeight">0–º</span>
                        <span class="stat-label">–í—ã—Å–æ—Ç–∞</span>
                    </div>
                </div>
                
                <button class="play-again-btn" onclick="restartGame()">
                    üöÄ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
                </button>
            </div>
        </div>
    </div>

    <script>
        // –ü–æ–ª—É—á–∞–µ–º canvas –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
        function resizeCanvas() {
            const maxWidth = Math.min(window.innerWidth * 0.9, 400);
            const maxHeight = Math.min(window.innerHeight * 0.9, 600);
            
            canvas.width = maxWidth;
            canvas.height = maxHeight;
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameState = 'loading';
        let score = 0;
        let maxHeight = 0;
        let cameraY = 0;
        let gyroEnabled = false;
        let gyroPermissionGranted = false;

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Å—Å–µ—Ç–æ–≤
        const assets = {
            player: new Image(),
            platform: new Image(),
            collectible: new Image(),
            background: new Image(),
            loaded: 0,
            total: 4
        };

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function loadAssets() {
            assets.player.onload = () => checkAssetsLoaded();
            assets.platform.onload = () => checkAssetsLoaded();
            assets.collectible.onload = () => checkAssetsLoaded();
            assets.background.onload = () => checkAssetsLoaded();
            //assets.player.src = "data:image/png;base64,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'
            //assets.player.src = 'player.png';
            //assets.player.src = '';
            assets.player.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAYAAAB/HSuDAADldmNhQlgAAOV2anVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAANxNqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3VybjpjMnBhOmIzZDk2YzA5LWE3NjAtNDE1NS1hNmRiLTMwMjZmNDE2ZDI2NgAAAAHh..."
            assets.platform.src = 'platform_upscaled_330x210.png';  
            assets.collectible.src = 'collectible_upscaled_330x210.png';
            assets.background.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==';
        }

        function checkAssetsLoaded() {
            assets.loaded++;
            if (assets.loaded === assets.total) {
                gameState = 'playing';
                console.log('–í—Å–µ –∞—Å—Å–µ—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
            }
        }

        // –ò–≥—Ä–æ–∫
        const player = {
            x: canvas.width / 3,
            y: canvas.height - 120,
            width: 70,
            height: 100,
            velocityX: 0,
            velocityY: 0,
            onGround: false,
            color: '#FF6B6B'
        };

        // –ú–∞—Å—Å–∏–≤—ã –æ–±—ä–µ–∫—Ç–æ–≤
        let platforms = [];
        let collectibles = [];

        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã
        const GRAVITY = 0.3;
        const JUMP_FORCE = -12;
        const PLAYER_SPEED = 5;
        const PLATFORM_WIDTH = 130;
        const PLATFORM_HEIGHT = 100;

        // –¢–∏–ø—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º
        const PLATFORM_TYPES = {
            NORMAL: 'normal',
            TEMPORARY: 'temporary',
            MOVING: 'moving'
        };

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∞–º–∏
        let leftPressed = false;
        let rightPressed = false;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º
        function initializePlatforms() {
            platforms = [];
            
            platforms.push({
                x: canvas.width / 2 - PLATFORM_WIDTH / 2,
                y: canvas.height - 80,
                width: PLATFORM_WIDTH,
                height: PLATFORM_HEIGHT,
                type: PLATFORM_TYPES.NORMAL,
                color: '#4CAF50',
                used: false
            });

            for (let i = 1; i < 20; i++) {
                platforms.push({
                    x: Math.random() * (canvas.width - PLATFORM_WIDTH),
                    y: canvas.height - 80 - (i * 250),
                    width: PLATFORM_WIDTH,
                    height: PLATFORM_HEIGHT,
                    type: PLATFORM_TYPES.NORMAL,
                    color: '#4CAF50',
                    used: false,
                    moveSpeed: 0
                });
                
                if (Math.random() < 0.3) {
                    collectibles.push({
                        x: platforms[platforms.length - 1].x + PLATFORM_WIDTH / 2 - 20,
                        y: platforms[platforms.length - 1].y - 60,
                        width: 110,
                        height: 90,
                        color: '#FFD700',
                        collected: false
                    });
                }
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –≤—ã—Å–æ—Ç–µ
        function generatePlatform(y) {
            const height = Math.abs(cameraY - y);
            let type = PLATFORM_TYPES.NORMAL;
            let color = '#4CAF50';
            
            if (height > 800) {
                const rand = Math.random();
                if (rand < 0.3) {
                    type = PLATFORM_TYPES.TEMPORARY;
                } else if (rand < 0.5) {
                    type = PLATFORM_TYPES.MOVING;
                }
            }

            const platform = {
                x: Math.random() * (canvas.width - PLATFORM_WIDTH),
                y: y,
                width: PLATFORM_WIDTH,
                height: PLATFORM_HEIGHT,
                type: type,
                used: false,
                moveSpeed: type === PLATFORM_TYPES.MOVING ? (Math.random() * 2 + 1) * (Math.random() < 0.5 ? 1 : -1) : 0
            };

            platforms.push(platform);

            if (Math.random() < 0.3) {
                collectibles.push({
                    x: platform.x + platform.width / 2 - 10,
                    y: platform.y - 30,
                    width: 50,
                    height: 60,
                    collected: false
                });
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–∏—Ä–æ—Å–∫–æ–ø–∞
        function requestGyroPermission() {
            if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission()
                    .then(response => {
                        if (response === 'granted') {
                            gyroPermissionGranted = true;
                            enableGyroscope();
                        } else {
                            alert('–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–∏—Ä–æ—Å–∫–æ–ø–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ');
                        }
                    })
                    .catch(console.error);
            } else {
                gyroPermissionGranted = true;
                enableGyroscope();
            }
        }

        function enableGyroscope() {
            if (gyroPermissionGranted) {
                window.addEventListener('deviceorientation', handleGyroscope);
                gyroEnabled = true;
                updateGyroButton();
                updateMobileControls();
            }
        }

        function disableGyroscope() {
            window.removeEventListener('deviceorientation', handleGyroscope);
            gyroEnabled = false;
            updateGyroButton();
            updateMobileControls();
        }

        function handleGyroscope(event) {
            if (!gyroEnabled || gameState !== 'playing') return;
            
            const gamma = event.gamma;
            if (gamma !== null) {
                const sensitivity = 0.4; // –£–º–µ–Ω—å—à–µ–Ω–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                const targetVelocityX = gamma * sensitivity;
                
                // –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
                const smoothing = 0.15;
                player.velocityX += (targetVelocityX - player.velocityX) * smoothing;
                
                
                // –ú–µ—Ä—Ç–≤–∞—è –∑–æ–Ω–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
                if (Math.abs(gamma) < 3) {
                    player.velocityX *= 0.95;
                }
            }
        }

        function updateGyroButton() {
            const button = document.getElementById('gyroToggle');
            if (gyroEnabled) {
                button.innerHTML = 'üîÑ –ì–∏—Ä–æ—Å–∫–æ–ø: –í–ö–õ';
                button.classList.add('active');
            } else {
                button.innerHTML = 'üîÑ –ì–∏—Ä–æ—Å–∫–æ–ø: –í–´–ö–õ';
                button.classList.remove('active');
            }
        }

        function updateMobileControls() {
            const controls = document.getElementById('mobileControls');
            if (window.innerWidth <= 768 && !gyroEnabled) {
                controls.style.display = 'flex';
            } else {
                controls.style.display = 'none';
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
        document.getElementById('gyroToggle').addEventListener('click', function() {
            if (gyroEnabled) {
                disableGyroscope();
            } else {
                if (!gyroPermissionGranted) {
                    requestGyroPermission();
                } else {
                    enableGyroscope();
                }
            }
        });

        // –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');

        leftBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            leftPressed = true;
        });

        leftBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            leftPressed = false;
        });

        rightBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            rightPressed = true;
        });

        rightBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            rightPressed = false;
        });

        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º—ã—à–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        leftBtn.addEventListener('mousedown', () => leftPressed = true);
        leftBtn.addEventListener('mouseup', () => leftPressed = false);
        rightBtn.addEventListener('mousedown', () => rightPressed = true);
        rightBtn.addEventListener('mouseup', () => rightPressed = false);

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        const keys = {};
        
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });
        
        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
        updateMobileControls();
        window.addEventListener('resize', updateMobileControls);

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä—ã
        function update() {
            if (gameState !== 'playing') return;

            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            if (!gyroEnabled) {
                if (keys['ArrowLeft'] || keys['a'] || keys['A'] || leftPressed) {
                    player.velocityX = -PLAYER_SPEED;
                } else if (keys['ArrowRight'] || keys['d'] || keys['D'] || rightPressed) {
                    player.velocityX = PLAYER_SPEED;
                } else {
                    player.velocityX *= 0.8;
                }
            }

            // –§–∏–∑–∏–∫–∞ –∏–≥—Ä–æ–∫–∞
            player.velocityY += GRAVITY;
            player.x += player.velocityX;
            player.y += player.velocityY;

            // –ì—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
            if (player.x < 0) {
                player.x = canvas.width;
            } else if (player.x > canvas.width) {
                player.x = 0;
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂—É—â–∏—Ö—Å—è –ø–ª–∞—Ç—Ñ–æ—Ä–º
            platforms.forEach(platform => {
                if (platform.type === PLATFORM_TYPES.MOVING) {
                    platform.x += platform.moveSpeed;
                    
                    if (platform.x <= 0 || platform.x >= canvas.width - platform.width) {
                        platform.moveSpeed *= -1;
                    }
                }
            });

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏
            player.onGround = false;
            platforms.forEach(platform => {
                if (player.velocityY > 0 &&
                    player.x < platform.x + platform.width &&
                    player.x + player.width > platform.x &&
                    player.y + player.height > platform.y &&
                    player.y + player.height < platform.y + platform.height + 10) {
                    
                    player.y = platform.y - player.height;
                    player.velocityY = JUMP_FORCE;
                    player.onGround = true;

                    if (platform.type === PLATFORM_TYPES.TEMPORARY && !platform.used) {
                        platform.used = true;
                        setTimeout(() => {
                            const index = platforms.indexOf(platform);
                            if (index > -1) {
                                platforms.splice(index, 1);
                            }
                        }, 500);
                    }
                }
            });

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            collectibles.forEach(collectible => {
                if (!collectible.collected &&
                    player.x < collectible.x + collectible.width &&
                    player.x + player.width > collectible.x &&
                    player.y < collectible.y + collectible.height &&
                    player.y + player.height > collectible.y) {
                    
                    collectible.collected = true;
                    score += 50;
                }
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
            const targetCameraY = player.y - canvas.height / 3;
            if (targetCameraY < cameraY) {
                cameraY = targetCameraY;
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç—ã –∏ —Å—á—ë—Ç–∞
            const currentHeight = Math.abs(Math.min(player.y - (canvas.height - 120), 0));
            if (currentHeight > maxHeight) {
                const heightDiff = currentHeight - maxHeight;
                maxHeight = currentHeight;
                score += Math.floor(heightDiff / 10);
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
            let needNewPlatforms = false;
            
            if (platforms.length === 0) {
                needNewPlatforms = true;
            } else {
                const highestPlatform = Math.min(...platforms.map(p => p.y));
                if (highestPlatform > cameraY - canvas.height * 2) {
                    needNewPlatforms = true;
                }
            }
            
            if (needNewPlatforms) {
                const startY = platforms.length > 0 ? 
                    Math.min(...platforms.map(p => p.y)) - 170 : 
                    cameraY - 170;
                    
                for (let i = 0; i < 8; i++) {
                    generatePlatform(startY - (i * 250));
                }
            }

            // –£–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º –∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            const cleanupThreshold = cameraY + canvas.height + 400;
            platforms = platforms.filter(platform => platform.y < cleanupThreshold);
            collectibles = collectibles.filter(collectible => 
                !collectible.collected && collectible.y < cleanupThreshold
            );

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
            if (player.y > cameraY + canvas.height + 100) {
                gameState = 'gameOver';
                showGameOver();
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
            document.getElementById('scoreValue').textContent = score;
            document.getElementById('heightValue').textContent = Math.floor(maxHeight / 10) + '–º';
        }

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (gameState === 'loading') {
                ctx.fillStyle = '#333';
                ctx.font = '24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('–ó–∞–≥—Ä—É–∑–∫–∞ –∞—Å—Å–µ—Ç–æ–≤...', canvas.width / 2, canvas.height / 2);
                ctx.fillText(`${assets.loaded}/${assets.total}`, canvas.width / 2, canvas.height / 2 + 40);
                return;
            }

            ctx.save();
            ctx.translate(0, -cameraY);

            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–ª–∞—Ç—Ñ–æ—Ä–º
            platforms.forEach(platform => {
                if (assets.platform.complete && assets.platform.naturalWidth > 1) {
                    ctx.drawImage(assets.platform, platform.x, platform.y, platform.width, platform.height);
                } else {
                    // –£–ª—É—á—à–µ–Ω–Ω—ã–π fallback –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º
                    ctx.fillStyle = '#4CAF50';
                    ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    ctx.fillStyle = '#388E3C';
                    ctx.fillRect(platform.x, platform.y, platform.width, 8);
                }
            });

            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è —Å–±–æ—Ä–∞
            collectibles.forEach(collectible => {
                if (!collectible.collected) {
                    if (assets.collectible.complete && assets.collectible.naturalWidth > 1) {
                        ctx.drawImage(assets.collectible, collectible.x, collectible.y, collectible.width, collectible.height);
                    } else {
                        // –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç - –∑–≤–µ–∑–¥–æ—á–∫–∞
                        ctx.fillStyle = '#FFD700';
                        ctx.beginPath();
                        const cx = collectible.x + collectible.width / 2;
                        const cy = collectible.y + collectible.height / 2;
                        const spikes = 5;
                        const outerRadius = collectible.width / 3;
                        const innerRadius = outerRadius * 0.5;
                        
                        for (let i = 0; i < spikes * 2; i++) {
                            const radius = i % 2 === 0 ? outerRadius : innerRadius;
                            const angle = (i * Math.PI) / spikes;
                            const x = cx + Math.cos(angle) * radius;
                            const y = cy + Math.sin(angle) * radius;
                            if (i === 0) ctx.moveTo(x, y);
                            else ctx.lineTo(x, y);
                        }
                        ctx.closePath();
                        ctx.fill();
                    }
                }
            });

            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–≥—Ä–æ–∫–∞
            if (assets.player.complete && assets.player.naturalWidth > 1) {
                ctx.drawImage(assets.player, player.x, player.y, player.width, player.height);
            } else {
                // –£–ª—É—á—à–µ–Ω–Ω—ã–π fallback –∏–≥—Ä–æ–∫–∞ - –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å –ª–∏—Ü–æ–º
                ctx.fillStyle = player.color;
                ctx.fillRect(player.x, player.y, player.width, player.height);
                
                // –õ–∏—Ü–æ
                ctx.fillStyle = 'white';
                ctx.fillRect(player.x + 10, player.y + 10, 12, 12);
                ctx.fillRect(player.x + 38, player.y + 10, 12, 12);
                ctx.fillStyle = 'black';
                ctx.fillRect(player.x + 14, player.y + 14, 4, 4);
                ctx.fillRect(player.x + 42, player.y + 14, 4, 4);
                
                // –£–ª—ã–±–∫–∞
                ctx.fillStyle = 'black';
                ctx.fillRect(player.x + 20, player.y + 35, 20, 3);
                ctx.fillRect(player.x + 18, player.y + 32, 3, 3);
                ctx.fillRect(player.x + 39, player.y + 32, 3, 3);
            }

            ctx.restore();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
        function showGameOver() {
            document.getElementById('finalScore').textContent = score;
            document.getElementById('finalHeight').textContent = Math.floor(maxHeight / 10) + '–º';
            document.getElementById('gameOverScreen').style.display = 'block';
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        function restartGame() {
            gameState = 'playing';
            score = 0;
            maxHeight = 0;
            cameraY = 0;
            
            // –°–±—Ä–æ—Å –∏–≥—Ä–æ–∫–∞
            player.x = canvas.width / 2;
            player.y = canvas.height - 120;
            player.velocityX = 0;
            player.velocityY = 0;
            player.onGround = false;

            // –û—á–∏—Å—Ç–∫–∞ –º–∞—Å—Å–∏–≤–æ–≤
            platforms = [];
            collectibles = [];
            
            // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º
            initializePlatforms();
            
            // –°–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
            document.getElementById('gameOverScreen').style.display = 'none';
        }

        // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        loadAssets();
        initializePlatforms();
        gameLoop();

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å–∞–Ω–∏–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        let touchStartX = 0;
        let touchStartY = 0;
        
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            touchStartX = touch.clientX;
            touchStartY = touch.clientY;
        });
        
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!gyroEnabled && gameState === 'playing') {
                const touch = e.touches[0];
                const deltaX = touch.clientX - touchStartX;
                
                if (Math.abs(deltaX) > 10) {
                    player.velocityX = deltaX > 0 ? PLAYER_SPEED : -PLAYER_SPEED;
                }
            }
        });
        
        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            if (!gyroEnabled) {
                player.velocityX *= 0.8;
            }
        });

        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ —Ñ–æ–∫—É—Å–∞ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏
        document.addEventListener('mouseup', () => {
            leftPressed = false;
            rightPressed = false;
        });

        document.addEventListener('touchend', () => {
            leftPressed = false;
            rightPressed = false;
        });
    </script>
</body>
</html>
